strategy:
  matrix: 
    gcc5: 
      docker_target: gcc5
    gcc6:
      docker_target: gcc6
    gcc7:
      docker_target: gcc7
    gcc8:
      docker_target: gcc8
    clang4:
      docker_target: clang4
    clang5:
      docker_target: clang5
    clang7:
      docker_target: clang6
    nvcc:
      docker_target: nvcc

variables:
  DOCKER_BUILDKIT: '1'

steps:
- checkout: self
  clean: boolean
  submodules: recursive
- task: Docker@1
  command: build
  inputs:
    dockerFile: Dockerfile
    arguments: '--target ${docker_target}'
